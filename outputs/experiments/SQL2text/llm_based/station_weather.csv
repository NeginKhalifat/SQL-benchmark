query,question,iter,flag,hardness
"SELECT T1.train_number, COUNT(DISTINCT T2.station_id) FROM train AS T1 JOIN route AS T2 ON T1.id = T2.train_id GROUP BY T1.train_number HAVING COUNT(T2.station_id) <= 5",What train numbers have routes that stop at 5 or fewer stations?,6,False,medium
"SELECT T1.name, T3.services FROM train AS T1 JOIN route AS T2 ON T1.id = T2.train_id JOIN station AS T3 ON T2.station_id = T3.id WHERE EXISTS (SELECT 1 FROM weekly_weather AS T4 WHERE T3.id = T4.station_id AND T4.high_temperature > 30) GROUP BY T3.services HAVING MAX(T4.high_temperature) > 30 ORDER BY T1.name DESC","What are the names of trains and their station services where the maximum weekly high temperature at any station on their route exceeds 30 degrees Celsius, listed in descending order of train name?",6,False,extra
"SELECT T1.name, COUNT(DISTINCT T2.station_id) FROM train AS T1 JOIN route AS T2 ON T1.id = T2.train_id WHERE T1.id IN (SELECT train_id FROM route WHERE station_id = 1) ORDER BY T1.name ASC","What are the names of the trains that stop at station 1 and how many distinct stations do they stop at, listed in ascending order by train name?",2,True,extra
"SELECT T1.train_number, COUNT(T2.station_id) FROM train AS T1 JOIN route AS T2 ON T1.id = T2.train_id JOIN station AS T3 ON T3.id = T2.station_id GROUP BY T1.train_number",What is the train number and how many stations does each train have in its route?,5,True,hard
"SELECT name, origin FROM train WHERE origin = 'London' AND destination = 'Birmingham' ORDER BY name DESC","What are the names and origins of the trains going from London to Birmingham, listed in descending order by name?",4,True,extra
"SELECT T1.id, SUM(T2.precipitation) FROM train AS T1 JOIN route AS T3 ON T1.id = T3.train_id JOIN station AS T4 ON T3.station_id = T4.id JOIN weekly_weather AS T2 ON T4.id = T2.station_id GROUP BY T1.id HAVING SUM(T2.precipitation) > (SELECT AVG(precipitation) FROM weekly_weather)",What are the train ids and their total precipitation where the total precipitation is more than the average precipitation across all stations?,6,False,extra
"SELECT train_number, name, origin, destination FROM train AS T1 WHERE EXISTS ( SELECT * FROM route AS T2 WHERE T2.train_id = T1.id ) AND EXISTS ( SELECT * FROM weekly_weather AS T3 WHERE T3.station_id = 123 )","What are the train numbers, names, origins, and destinations of trains that have a corresponding route and a weekly weather forecast for station 123?",6,False,extra
SELECT name FROM train WHERE train_number NOT IN (SELECT train_number FROM train WHERE destination = 'London') LIMIT 5,"What are the names of the next 5 trains that do not go to London, after the first 5?",6,False,extra
SELECT name FROM train WHERE EXISTS (SELECT 1 FROM route WHERE train.id = route.train_id AND route.station_id = (SELECT id FROM station WHERE network_name = 'London')),What are the names of the trains that stop at the London station?,2,True,hard
SELECT train_number FROM train WHERE id = ( SELECT train_id FROM route WHERE station_id = 5 ) OR time > '10:00' OR train_number > ( SELECT COUNT(train_id) FROM route WHERE station_id = 3 ) LIMIT 10,"What are the train numbers of the trains that either belong to the route of station 5, depart after 10:00, or have a train number greater than the number of trains going through station 3, listed from the 11th to the 20th result?",6,False,extra
"SELECT train_number, COUNT(*) FROM train WHERE id <= 100 GROUP BY train_number ORDER BY train_number ASC LIMIT 50",What are the train numbers and the number of trains with each number for the first 50 train numbers greater than 100?,6,False,extra
"SELECT T1.train_number, T1.name FROM train AS T1 JOIN route AS T2 ON T1.id = T2.train_id JOIN station AS T3 ON T2.station_id = T3.id WHERE T3.network_name IN (SELECT T4.network_name FROM station AS T4 WHERE T4.local_authority = 'London')",What are the numbers and names of the trains that pass through the stations in the same network as those in London?,5,True,extra
SELECT train_number FROM train WHERE train_number > 50 ORDER BY train_number DESC,"What are the train numbers greater than 50, listed in descending order?",2,True,medium
"SELECT train_number, name FROM train WHERE id > 10 AND origin = 'London'",What are the names and train numbers of trains originating from London with id greater than 10?,2,True,medium
SELECT train_number FROM train WHERE name = 'Express' OR origin = 'London' OR destination NOT IN (SELECT local_authority FROM station),"What are the train numbers of the trains that are named 'Express', start in London, or do not end in any local authority covered by a station?",3,True,extra
"SELECT T1.train_number, T2.network_name FROM train AS T1 JOIN route AS T3 ON T1.id = T3.train_id JOIN station AS T2 ON T3.station_id = T2.id WHERE T1.origin = 'London'",What are the train numbers and network names for trains originating from London?,5,True,hard
"SELECT T1.name, T2.network_name FROM train AS T1 JOIN route AS T3 ON T1.id = T3.train_id JOIN station AS T2 ON T2.id = T3.station_id WHERE T1.name = 'Train_1' AND T2.network_name = 'Station_1' AND T2.network_name = (SELECT T2.network_name FROM train AS T1 JOIN route AS T3 ON T1.id = T3.train_id JOIN station AS T2 ON T2.id = T3.station_id WHERE T1.name = 'Train_0') LIMIT 10","What are the names of the stops for Train_1 that are also stops for Train_0, starting with the 11th result?",6,False,extra
SELECT MIN(T1.time) FROM train AS T1 JOIN route AS T2 ON T1.id = T2.train_id WHERE T2.station_id = 1 LIMIT 10,What are the 11th to 20th earliest arrival times of trains at station 1?,6,False,hard
"SELECT COUNT(DISTINCT T1.origin), T1.train_number FROM train AS T1 WHERE T1.train_number > 100 OR T1.time = 'day' OR EXISTS (SELECT 1 FROM station AS T2 WHERE T2.network_name = 'London') ORDER BY T1.train_number DESC","What are the counts of unique train origins and their corresponding train numbers for trains with numbers greater than 100 or day trains or any trains if there is a station in London, listed in descending order of train number?",6,False,extra
SELECT train_number FROM train WHERE id > (SELECT MAX(train_id) FROM route) ORDER BY train_number DESC,"What are the train numbers of trains with IDs greater than the maximum train ID in the route table, listed in descending order?",2,True,extra
"SELECT T1.name, COUNT(T2.station_id) FROM train AS T1 JOIN route AS T2 ON T1.id = T2.train_id GROUP BY T1.name HAVING COUNT(T2.station_id) > 10 LIMIT 5","What are the names of the 5 trains with the most stops after the first 5, where each train has more than 10 stops?",3,True,hard
"SELECT train_number AS changed_name, COUNT(id) FROM train WHERE time = '08:00' GROUP BY train_number ORDER BY train_number DESC","What are the train numbers with the count of trains that depart at 08:00, listed in descending order by train number?",2,True,hard
SELECT T1.network_name FROM station AS T1 JOIN route AS T2 ON T1.id = T2.station_id JOIN train AS T3 ON T2.train_id = T3.id JOIN weekly_weather AS T4 ON T1.id = T4.station_id ORDER BY T1.network_name ASC,"What are the network names of all stations, listed in ascending order?",6,False,extra
