query,question,iter,flag,hardness
SELECT T1.Shop_ID FROM happy_hour AS T1 JOIN happy_hour AS T2 ON T1.Shop_ID = T2.Shop_ID WHERE T1.Num_of_shaff_in_charge < 5 OR T2.Num_of_shaff_in_charge BETWEEN 3 AND 10 OR T1.HH_ID NOT IN (SELECT HH_ID FROM happy_hour WHERE Month = 'January') ORDER BY T1.Shop_ID DESC LIMIT 10,"What are the top 10 shop IDs with the largest IDs first where the number of staff in charge is either less than 5, or between 3 and 10, or the month is not January, listing 10 records starting from the 11th record?",4,True,extra
SELECT Name FROM member AS T1 WHERE Age > 18,What are the names of the members who are older than 18?,2,True,easy
SELECT Shop_ID FROM shop WHERE Score > 3 AND Num_of_staff > 10,What are the IDs of shops with a score over 3 and more than 10 staff?,2,True,medium
"SELECT COUNT(DISTINCT T1.Shop_ID), T1.Address FROM shop AS T1 JOIN happy_hour AS T2 ON T1.Shop_ID = T2.Shop_ID JOIN happy_hour_member AS T3 ON T2.HH_ID = T3.HH_ID",What are the counts of unique shops and their addresses that have happy hours and happy hour members?,6,False,medium
SELECT COUNT(DISTINCT T1.Shop_ID) FROM shop AS T1 JOIN happy_hour AS T2 ON T1.Shop_ID = T2.Shop_ID WHERE T1.Score > 4 OR T1.Num_of_staff = 'Few' OR T1.Shop_ID IN (SELECT Shop_ID FROM happy_hour WHERE Num_of_shaff_in_charge > 5) ORDER BY T1.Shop_ID ASC,"How many unique shops have a score greater than 4, few staff, or more than 5 staff in charge during happy hour, ordered by shop ID?",2,True,extra
"SELECT T1.Shop_ID, T2.Total_amount FROM shop AS T1 JOIN happy_hour AS T3 ON T1.Shop_ID = T3.Shop_ID JOIN happy_hour_member AS T2 ON T3.HH_ID = T2.HH_ID WHERE T1.Score > 4 GROUP BY T1.Shop_ID ORDER BY T1.Score DESC","What are the shop IDs, total happy hour amounts, and corresponding shop scores for shops with a score greater than 4, listed in descending order by score?",6,False,extra
"SELECT Time_of_purchase, Address FROM member WHERE Age > 30 ORDER BY Time_of_purchase ASC","What are the purchase times and addresses of members older than 30, listed in ascending order of purchase time?",3,True,medium
"SELECT MIN(T1.Total_amount), COUNT(DISTINCT T2.Name) FROM happy_hour_member AS T1 JOIN member AS T2 ON T1.Member_ID = T2.Member_ID LIMIT 1",What is the minimum total amount spent by members and the number of unique member names?,6,False,extra
SELECT T1.Shop_ID FROM happy_hour AS T1 JOIN happy_hour AS T2 ON T1.Shop_ID = T2.Shop_ID WHERE T1.Month = 'January' AND T2.Month = 'February' LIMIT 10,What are the IDs of the next 10 shops after the first 10 that are open for happy hour in both January and February?,6,False,hard
"SELECT T1.Shop_ID, T1.Address FROM shop AS T1 WHERE EXISTS (SELECT 1 FROM happy_hour AS T2 WHERE T2.Shop_ID = T1.Shop_ID AND T2.Num_of_shaff_in_charge > 5)",What are the shop IDs and addresses of the shops that have more than 5 staff in charge during happy hour?,3,True,extra
SELECT * FROM shop WHERE Score <= 5 ORDER BY Score ASC LIMIT 1,What is the information of the shop with the second lowest score?,6,False,hard
SELECT T1.Shop_ID FROM shop AS T1 WHERE T1.Address = 'Tokyo' AND T1.Score BETWEEN 4 AND 5 AND EXISTS (SELECT 1 FROM member AS T2 WHERE T2.Address = 'Tokyo' AND T2.Age > 20),What are the shop IDs of shops located in Tokyo with a score between 4 and 5 where there is at least one member from Tokyo who is older than 20?,3,True,extra
SELECT T1.Shop_ID FROM shop AS T1 JOIN happy_hour AS T2 ON T1.Shop_ID = T2.Shop_ID WHERE NOT EXISTS (SELECT 1 FROM happy_hour_member AS T3 WHERE T3.HH_ID = T2.HH_ID AND T3.Total_amount < 100),Which shop ids have no happy hour members who spent less than 100 dollars?,2,True,extra
"SELECT T2.Address, SUM(T1.Total_amount) FROM happy_hour_member AS T1 JOIN member AS T2 ON T1.Member_ID = T2.Member_ID WHERE T2.Level_of_membership = 1 AND EXISTS ( SELECT T3.Shop_ID FROM happy_hour AS T3 WHERE T3.Shop_ID = 1 ) GROUP BY T2.Address","What are the total amounts spent by each level 1 member at the shop with ID 1, grouped by member address?",6,False,extra
SELECT SUM(T1.Score) FROM shop AS T1 WHERE T1.Shop_ID > 10 AND T1.Shop_ID NOT IN ( SELECT T2.Shop_ID FROM happy_hour AS T2 ) OR T1.Score < ( SELECT SUM(T3.Num_of_shaff_in_charge) FROM happy_hour AS T3 ),"What is the total score of shops that either have a shop id greater than 10 and do not have a happy hour, or have a score less than the total number of staff in charge of happy hours?",2,True,extra
"SELECT T1.Shop_ID AS ID, T1.Score, MAX(T2.Total_amount) FROM shop AS T1 JOIN happy_hour_member AS T2 ON T1.Shop_ID = T2.HH_ID WHERE T2.Member_ID = 123 ORDER BY T1.Score ASC","What is the shop ID, score, and maximum total amount spent by member 123, listed in ascending order of score?",6,False,hard
SELECT Shop_ID FROM shop WHERE Score BETWEEN 3 AND 5 AND Address NOT IN (SELECT Address FROM member) AND Num_of_staff = 'Small',"Which small shops with scores between 3 and 5, and which are not members' addresses, are available?",6,False,extra
"SELECT T1.Name, SUM(T2.Total_amount) FROM member AS T1 JOIN happy_hour_member AS T2 ON T1.Member_ID = T2.Member_ID WHERE T1.Age = 25 GROUP BY T1.Name ORDER BY SUM(T2.Total_amount) ASC","For members aged 25, what are their names and the total amounts they spent at happy hours, listed in ascending order by total amount spent?",6,False,extra
"SELECT m.Address, h.Month, hhm.Total_amount FROM shop s JOIN happy_hour h ON s.Shop_ID = h.Shop_ID JOIN happy_hour_member hhm ON h.HH_ID = hhm.HH_ID JOIN member m ON hhm.Member_ID = m.Member_ID ORDER BY m.Address ASC","What are the addresses of members, the months of happy hour, and the total amounts spent by members at each happy hour location, listed in ascending order by address?",6,True,extra
