query,question,iter,flag,hardness
SELECT first_name FROM Students WHERE middle_name != 'John',What are the first names of students who do not have 'John' as their middle name?,2,True,easy
SELECT COUNT(DISTINCT T1.first_name) FROM Students AS T1 INNER JOIN Addresses AS T2 ON T1.address_id = T2.address_id WHERE T1.date_first_rental <= T2.zip_postcode,How many unique first names of students are there where the first rental date is earlier than or equal to the zip or postcode of their address?,4,True,medium
"SELECT T1.first_name, T1.last_name, T1.middle_name, T2.first_name, T2.last_name FROM Students AS T1 JOIN Students AS T2 ON T1.student_id = T2.student_id WHERE T1.date_left_university BETWEEN '2020-01-01' AND '2021-12-31' ORDER BY T2.date_first_rental ASC","What are the full names of students who left the university between 2020 and 2021, ordered by the date they first rented a place?",6,False,hard
SELECT T1.student_id FROM Students AS T1 JOIN Students AS T2 ON T1.student_id = T2.student_id WHERE T1.cell_mobile_number BETWEEN 100 AND 1000 AND NOT EXISTS (SELECT T3.teacher_id FROM Teachers AS T3 WHERE T3.teacher_id = T1.student_id),Which student IDs are of students who have a cell phone number between 100 and 1000 and are not teachers?,2,True,extra
"SELECT COUNT(student_id), COUNT(DISTINCT detention_id) FROM Students_in_Detention",What are the total number of students and the number of distinct detentions in the Students_in_Detention table?,3,True,medium
SELECT T1.last_name FROM Students AS T1 JOIN Student_Addresses AS T2 ON T1.student_id = T2.student_id WHERE T2.monthly_rental <= 100 LIMIT 5,What are the last names of the next 5 students after the first 5 who are paying a monthly rental of $100 or less?,6,False,hard
SELECT T1.first_name FROM Students AS T1 WHERE T1.cell_mobile_number = '1234567890' OR T1.email_address = 'student@example.com' OR EXISTS (SELECT 1 FROM Student_Addresses AS T2 WHERE T2.student_id = T1.student_id AND T2.date_address_to IS NULL) ORDER BY T1.date_first_rental DESC,"What are the names of the students who have the cell mobile number '1234567890' or the email address 'student@example.com' or have a current address, listed in descending order of their first rental date?",6,False,extra
SELECT * FROM Ref_Incident_Type WHERE incident_type_code != 'IT001' ORDER BY incident_type_description ASC,"What are all the details of incident types excluding 'IT001', listed in ascending order by description?",4,True,medium
SELECT T1.student_id FROM Students AS T1 JOIN Student_Addresses AS T2 ON T1.student_id = T2.student_id WHERE T2.monthly_rental > 1000 ORDER BY T1.student_id ASC,"What are the student ids of students who pay more than 1000 in monthly rental, listed in ascending order?",2,True,hard
"SELECT T1.student_id, T2.address_id FROM Students AS T1 JOIN Addresses AS T2 ON T1.address_id = T2.address_id WHERE T1.student_id < 100",What are the student IDs and corresponding address IDs of the students with IDs less than 100?,6,False,medium
SELECT T1.teacher_id FROM Teachers AS T1 JOIN Detention AS T2 ON T1.teacher_id = T2.teacher_id WHERE T1.gender = 'Male' AND T2.detention_type_code = 'Major' AND T2.teacher_id NOT IN (SELECT teacher_id FROM Detention WHERE detention_type_code = 'Minor') GROUP BY T2.teacher_id HAVING AVG(T2.datetime_detention_end) > '2022-01-01',"What are the IDs of male teachers who issued only major detentions and had an average detention end date later than January 1, 2022?",6,False,extra
SELECT T1.detention_type_code FROM Ref_Detention_Type AS T1 JOIN Detention AS T2 ON T1.detention_type_code = T2.detention_type_code JOIN Teachers AS T3 ON T2.teacher_id = T3.teacher_id WHERE T3.teacher_id = 1,What detention type codes are given by the teacher with ID 1?,6,False,hard
"SELECT T1.address_type_code, SUM(T2.line_1) FROM Ref_Address_Types AS T1 JOIN Addresses AS T2 ON T1.address_type_code = T2.address_id WHERE T1.address_type_code = '123' OR T2.line_1 BETWEEN 'Street 1' AND 'Street 10' OR T2.line_1 = 'Street 5'","What is the sum of line 1 addresses and the address type code, when the address type code is '123' or line 1 address is between 'Street 1' and 'Street 10', or line 1 address is 'Street 5'?",6,False,extra
SELECT T1.student_id FROM Students AS T1 JOIN Students_in_Detention AS T2 ON T1.student_id = T2.student_id WHERE T2.incident_id < 100 AND T2.detention_id > 50 AND NOT EXISTS (SELECT T3.student_id FROM Students AS T3 JOIN Students_in_Detention AS T4 ON T3.student_id = T4.student_id WHERE T3.student_id = T1.student_id AND T4.detention_id = 25),"What are the student IDs of students who have been in a detention with an incident ID less than 100 and a detention ID greater than 50, but have never been in detention 25?",3,True,extra
SELECT T1.first_name FROM Students AS T1 JOIN Addresses AS T2 ON T1.address_id = T2.address_id WHERE T2.zip_postcode < 10000 LIMIT 5,What are the next 5 first names of students whose zip or postcode is less than 10000?,2,True,hard
SELECT COUNT(DISTINCT T1.student_id) FROM Students AS T1 JOIN Behavior_Incident AS T2 ON T1.student_id = T2.student_id JOIN Detention AS T3 ON T2.incident_id = T3.detention_id WHERE T3.datetime_detention_start < T2.date_incident_start ORDER BY COUNT(DISTINCT T1.student_id) DESC LIMIT 1,What is the second most number of students who received detention after an incident occurred?,6,False,extra
